<app-events-hero></app-events-hero>
<div class="container-fluid px-2 px-md-5 py-2 py-md-3" style="overflow-x: hidden; max-width: 100vw; width: 100%;">
  <div class="row g-5" style="margin: 0;">
    <div class="col-12" dir="rtl" style="padding: 0;">
      @if (isAdminOrInstructor) {
        <div class="d-flex justify-content-end mb-4">
          <a routerLink="/events/create" class="btn btn-danger px-4 py-3">
            <i class="bi bi-plus-lg me-2"></i>
            יצירת סמינר חדש
          </a>
        </div>
      }
      <div class="events-content-card">
        @if (errorMessage) {
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            {{ errorMessage }}
            <button type="button" class="btn-close" (click)="errorMessage = ''" aria-label="סגור"></button>
          </div>
        }
        @if (successMessage) {
          <div class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="bi bi-check-circle-fill me-2"></i>
            {{ successMessage }}
            <button type="button" class="btn-close" (click)="successMessage = ''" aria-label="סגור"></button>
          </div>
        }

        @if (isLoading) {
          <div class="loading-state">
            <div class="loading-spinner">
              <div class="spinner-border text-danger" role="status">
                <span class="visually-hidden">טוען...</span>
              </div>
            </div>
            <p class="loading-text">טוען סמינרים...</p>
          </div>
        }

        @if (!isLoading && events.length === 0 && !errorMessage) {
          <div class="empty-state">
            <div class="empty-state__icon">
              <i class="bi bi-calendar-x"></i>
            </div>
            <h3 class="empty-state__title">אין סמינרים זמינים כרגע</h3>
            <p class="empty-state__text">כרגע אין סמינרים פתוחים להרשמה, חזרו אלינו בקרוב.</p>
            @if (errorMessage) {
              <button class="btn btn-outline-primary mt-3" (click)="loadEvents()">
                <i class="bi bi-arrow-clockwise me-2"></i>
                נסה שוב
              </button>
            }
          </div>
        }

        @if (!isLoading && events.length > 0) {
          <div class="events-list">
            @for (eventItem of events; track trackByEventId($index, eventItem)) {
              <div class="event-card" [attr.aria-label]="'סמינר: ' + (eventItem.title || 'סמינר')">
                <div class="event-card__header">
                  <h3 class="event-card__title">{{ eventItem.title || 'סמינר' }}</h3>
                  <div class="event-card__status" [class.status-open]="eventItem.registrationOpen" [class.status-closed]="!eventItem.registrationOpen">
                    <i class="bi" [class.bi-check-circle]="eventItem.registrationOpen" [class.bi-x-circle]="!eventItem.registrationOpen"></i>
                    <span>{{ eventItem.registrationOpen ? 'פתוח להרשמה' : 'הרשמה סגורה' }}</span>
                  </div>
                </div>
                <div class="event-card__body">
                  @if (eventItem.description) {
                    <p class="event-card__description">{{ eventItem.description }}</p>
                  }
                  <div class="event-card__meta">
                    <div class="event-meta-item">
                      <i class="bi bi-calendar3"></i>
                      <span>{{ eventItem.startDateTime | date:'dd/MM/yyyy' }} - {{ eventItem.endDateTime | date:'dd/MM/yyyy' }}</span>
                    </div>
                  </div>
                </div>
                <div class="event-card__footer">
                  <a [routerLink]="['/events', eventItem.id]" class="event-card__button">
                    <i class="bi bi-arrow-left"></i>
                    <span>תצוגה מקדימה</span>
                  </a>
                </div>
              </div>
            }
          </div>
        }
      </div>

    </div>
  </div>
</div>
