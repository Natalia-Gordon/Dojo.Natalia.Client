<div class="user-menu-container" *ngIf="userInfo">
  <!-- User Avatar Button -->
  <button 
    type="button" 
    class="user-avatar-btn"
    (click)="onAvatarClick()"
    [class.active]="isMenuOpen">
    <div class="user-avatar">
      <span class="avatar-initial">{{ getInitials() }}</span>
    </div>
  </button>

  <!-- Dropdown Menu -->
  <div class="user-menu-dropdown" *ngIf="isMenuOpen">
    <!-- User Header Section -->
    <div class="user-menu-header">
      <button 
        type="button"
        class="user-avatar-large-btn"
        (click)="onMenuAvatarClick()"
        title="驻专 砖转砖">
        <div class="user-avatar-large">
          <span class="avatar-initial-large">{{ getInitials() }}</span>
        </div>
      </button>
      <div class="user-info">
        <div class="user-name">{{ userInfo.displayName || userInfo.username }}</div>
        <div class="user-last-login" *ngIf="userInfo.lastLoginAt">
          转专转 专: {{ formatLastLogin(userInfo.lastLoginAt) }}
        </div>
        <div class="user-badges">
          <span class="badge" [ngClass]="getLevelColor(userInfo.level)">
            {{ userInfo.level || 'User' }}
          </span>
          <span class="badge badge-role" *ngIf="userInfo.role">
            {{ userInfo.role }}
          </span>
        </div>
      </div>
    </div>

    <!-- Separator -->
    <div class="menu-separator"></div>

    <!-- Menu Items -->
    <div class="menu-items">
      <a href="#" class="menu-item" (click)="onUserDetailsClick(); $event.preventDefault()">
        <span class="menu-icon">锔</span>
        <span>驻专驻 砖转砖</span>
      </a>
      <a href="#" class="menu-item" (click)="closeMenu(); $event.preventDefault()">
        <span class="menu-icon"></span>
        <span>专砖转 砖</span>
      </a>
    </div>

    <!-- Separator -->
    <div class="menu-separator"></div>

    <!-- Logout Button -->
    <button type="button" class="menu-item menu-item-logout" (click)="onLogout()">
      <span class="menu-icon"></span>
      <span>转转拽转</span>
    </button>
  </div>
</div>
